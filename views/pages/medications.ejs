<%- include ("./partials/header.ejs") %>
<body>
    <div class="wrapper">
        <div class="title">Medicines</div>
           
            <div class="products">
                <% if (products.length > 0) { %>
                    <% products.forEach(product => { %>
                <div class="product-container">
                    <img src="/IMAGES/<%=product.img %>" alt="<%= %>">
                    <div class="product">
                        <a href="/medications/productDetails/<%=product.id%>" title="<%= %>" class="product-title"> <%= product.product_name %> </a>
                        <h5 class="price"><%= product.product_newprice %></h5>
                        <!-- <button class="btnm">Add to Cart</button> -->
                        <!-- <span class="addtobag"><button id="add-to-bag" type="submit" class="btnm">ADD TO BAG</button></span> -->
                        <form action="/add" method="post">
                            
                            <input type="hidden" name="product" value="<%= product._id %>">
                            <input type="hidden" name="name" value="<%= product.product_name %>">
                            <input type="hidden" name="price" value="<%= product.product_price %>">
                            <input type="hidden" name="image" value="/imgs/uploads/<%= product.img%>">
                            <input type="number" name="quantity" value="1" hidden>
                            

                           <button class="addtocart" type="submit">ADD TO CART</button>
                          </form>
                    </div>
                </div>
                <% }) %>
            <% } else{ %>
                <p>There is no products to display....</p>
                <% } %>
            </div> 
            
            <ul class="pagination">
                <% if (pages > 0) { %>
                    <% for(let i = 1; i <= pages; i++) { %>
                        <li class="<%= current == i ? 'active' : '' %>">
                        <a href="/medications?page=<%= i %>"><%= i %></a>
                        </li>
                    <% } %>
                <% } %>
            </ul>
    </div>
    <script>
        const button = document.querySelector(".addtocart");
        const done = document.querySelector(".done");
        console.log(button);
        let added = false;
        button.addEventListener('click', () => {
            if (added) {
                done.style.transform = "translate(-110%) skew(-40deg)";
                added = false;
            }
            else {
                done.style.transform = "translate(0px)";
                added = true;
            }
        });

        function count(meen) {
            let minus = document.getElementById("minus");
            let val = document.getElementById("value");
            let add = document.getElementById("add");
            let countNum = parseInt(val.innerHTML);
            if (meen == 'minus') {
                if (countNum > 1) {
                    let valuee = countNum - 1;
                    val.innerHTML = valuee;
                }
            }
            if (meen == 'add') {
                let valuee = countNum + 1;
                val.innerHTML = valuee;
            }
        }

    </script>
    <%- include ("./partials/footer.ejs") %>
</body>

</html>
